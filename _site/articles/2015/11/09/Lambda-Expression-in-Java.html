<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width initial-scale=1">

<meta property="og:title" content="Lambda Expression in Java">
<title>Lambda Expression in Java</title>
<meta property="og:description" content="It has been a long time never update my blog since my first post. From April to November, our team devote all of our time to this new product. Good news is t...">
<meta property="og:url" content="http://superclark.co/articles/2015/11/09/Lambda-Expression-in-Java.html">
<meta property="og:site_name" content="Superclark">
<meta property="og:locale" content="en_US">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@Clark_theSuper">
<meta name="twitter:creator" content="@Clark_theSuper">
<meta name="twitter:title" content="Lambda Expression in Java">
<meta name="twitter:description" content="It has been a long time never update my blog since my first post. From April to November, our team devote all of our time to this new product. Good news is t...">
<meta name="twitter:url" content="http://superclark.co/articles/2015/11/09/Lambda-Expression-in-Java.html">

<meta name="keywords" content="Technology, clark, skiing">

<link rel="icon" href="/images/favicon.ico">
<link rel="stylesheet" href="/css/main.css">
<link rel="canonical" href="http://superclark.co/articles/2015/11/09/Lambda-Expression-in-Java.html">
<link rel="alternate" type="application/atom+xml" title="Superclark" href="http://superclark.co/feed.xml" />

<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<script language="Javascript" type="text/javascript">
function search_google()
{
  var query = document.getElementById("google-search").value;
  window.open("http://google.com/search?q=" + query
      + "%20site:" + "http://superclark.co");
}
</script>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', '', 'auto');
ga('send', 'pageview');

</script>


<script type='text/javascript'>
var blocklink = ['http://humanorightswatch.org','http://o-o-6-o-o.com','http://darodar.com','http://blackhatworth.com','http://hulfingtonpost.com','http://bestwebsitesawards.com','http://darodar.com','http://buttons-for-website.com','http://ilovevitaly.co','http://semalt.com','http://priceg.com','http://simple-share-buttons.com','http://googlsucks.com','http://4webmasters.org','http://aliexpress.com','http://addons.mozilla.org/en-US/firefox/addon/ilovevitaly/'];
for (var b = blocklink.length; b--;) {
  if (document.referrer.match(blocklink[b]))
    window.location = "http://www.google.com";
}
</script>




</head>


<body>

<div class="container">

  <header class="site-header">

  <div class="wrapper">

    <h1 class="site-title"><a href="/">Superclark</a></h1>
    <h3 class="site-meta">Technology and Skiing</h3>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>
      <div class="trigger">
        
        
        <a class="page-link" href="/">Home</a>
        
        
        
        <a class="page-link" href="/about/">About</a>
        
        
        
        <a class="page-link" href="/archives/">Archives</a>
        
        
        
        <a class="page-link" href="/categories/">Categories</a>
        
        
        
        <a class="page-link" href="/tags/">Tags</a>
        
        
        
        <a class="page-link" href="/guestbook/">Guestbook</a>
        
        
        
        <a class="page-link" href="/feed.xml">Subscribe</a>
        
        
        
        
        
        
        
        
      </div>
    </nav>

  </div>

</header>


    

  <div class="page-content col-sm-8">
    <div class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 itemprop="name" class="post-title">Lambda Expression in Java</h1>
    <meta itemprop="keywords" content="Java" />
    <p class="post-meta">
    Posted in
    
    <a href="/categories/#articles">articles</a>&nbsp;
     
    
    and tagged
    
    <a href="/tags/#Java" title="Java">Java </a>
    
    
    <time itemprop="datePublished" datetime="2015-11-09">
    on Nov 9, 2015
    </time>
    </p>
  </header>

  <article class="post-content" itemprop="articleBody">
    <p>It has been a long time never update my blog since my <a href="http://superclark.co/articles/2015/04/30/Angularjs-Spring-Security-CSRF-Configuration.html">first post</a>. From April to November, our team devote all of our time to this <a href="http://www.cloardkit.com/">new product</a>. Good news is that it just launched last Friday, so i could have some to continue writing this blog.</p>

<p>Just like before, this product is base on Model-View-Controller architecture design. While during the development time, we met some troubles to maintain this MVC structure. We have persistence layer which is Model, a Service layer to handle all the data processing, and lastly, the controller layer to render the data to front view. We try to follow a simple role, each layer can only use the function from the deeper layer. For example, Service can only use the function from Dao, while controller can only use the function from Service. For most time, this rule is easy to follow, however some times we must handle some data filtering and handling into model and some other place where we don’t want to inject any layer object. So in order to achieve such filtering and data handling function, some times we may pass the function as a parameter.</p>

<p>How’s performance, so far so good. While, our code looks like a little bit dirty. Can you imagine such code like this:</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">findAdultUser</span><span class="o">(</span><span class="n">userList</span><span class="o">,</span> <span class="k">new</span> <span class="nf">CheckAdultUserService</span><span class="o">());</span></code></pre></div>

<p>I pass a service object to this function. We can’t this approach is wrong, but can we have any better approach to let our code looks more elegant and clean. In Java 8, we have Lambda Expression enable us to do this, it treats functionality as method argument, or code as data.</p>

<p>First of all let’s solve some problem base on my old approach. Scenario is that we have a group of people, and we only need to print out the name of all the <strong>adult people</strong></p>

<p>For the service, we will have a <strong>UserCheckService</strong> to <strong>test()</strong> out all valid user, a <strong>UserNameMapService</strong> to <strong>apply()</strong> (grab) all the user’s name and lastly a <strong>NamePrintService</strong> to <strong>accept()</strong> (print out) all these names. If we want to create these all by ourselves, we need at least three interface and three class implementation to do this.</p>

<ul>
  <li>UserCheckService</li>
  <li>UserCheckServiceImpl</li>
  <li>UserNameMapService</li>
  <li>UserNameMapServiceImpl</li>
  <li>NamePrintService</li>
  <li>NamePrintServiceImpl</li>
</ul>

<p>In Java 8, all these interface are already pre-defined, so we don’t need to define the interface again. All the implementation will like this. (Class name may vary)</p>

<p>UserCheckServiceImpl:</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CheckAdultUserPredicator</span> <span class="kd">implements</span> <span class="n">Predicate</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">test</span><span class="o">(</span><span class="n">User</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">user</span><span class="o">.</span><span class="na">getAge</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">18</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></div>

<p>UserNameMapServiceImpl:</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserNameMapper</span> <span class="kd">implements</span> <span class="n">Function</span><span class="o">&lt;</span><span class="n">User</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">apply</span><span class="o">(</span><span class="n">User</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">user</span><span class="o">.</span><span class="na">getName</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></div>

<p>NamePrintServiceImpl:</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">NameDataConsumer</span> <span class="kd">implements</span> <span class="n">Consumer</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">accept</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></div>

<p>Then we will create a function to combine all these service together to print all adult user name.</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">findAdultUserName</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">users</span><span class="o">,</span>
  <span class="n">Predicate</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">predicator</span><span class="o">,</span>
  <span class="n">Function</span><span class="o">&lt;</span><span class="n">User</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">mapper</span><span class="o">,</span>
  <span class="n">Consumer</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">consumer</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">for</span> <span class="o">(</span><span class="n">User</span> <span class="n">u</span> <span class="o">:</span> <span class="n">users</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">if</span> <span class="o">(</span><span class="n">predicator</span><span class="o">.</span><span class="na">test</span><span class="o">(</span><span class="n">u</span><span class="o">))</span> <span class="o">{</span>
              <span class="n">String</span> <span class="n">s</span> <span class="o">=</span> <span class="n">mapper</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">u</span><span class="o">);</span>
              <span class="n">consumer</span><span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
          <span class="o">}</span>
      <span class="o">}</span>
  <span class="o">}</span></code></pre></div>

<p>In our main function, we will call like this:</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">findAdultUserName</span><span class="o">(</span><span class="n">userList</span><span class="o">,</span>
                <span class="k">new</span> <span class="nf">CheckAdultUserPredicator</span><span class="o">(),</span>
                <span class="k">new</span> <span class="nf">UserNameMapper</span><span class="o">(),</span>
                <span class="k">new</span> <span class="nf">NameDataConsumer</span><span class="o">());</span></code></pre></div>

<p>Finally, we did it. Seems a lot of work have been done, and our code size increased a lot. You will not like this, now let’s do this with Lambda Expression.</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">findAdultUserName</span><span class="o">(</span><span class="n">userList</span><span class="o">,</span>
                <span class="n">u</span> <span class="o">-&gt;</span> <span class="n">u</span><span class="o">.</span><span class="na">getAge</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">18</span><span class="o">,</span> <span class="c1">//same as the predicator</span>
                <span class="n">u</span> <span class="o">-&gt;</span> <span class="n">u</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span>     <span class="c1">//same as the mapper</span>
                <span class="n">name</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span><span class="o">));</span>  <span class="c1">//same as the consumer</span></code></pre></div>

<p>Just like this, we don’t need to do any other interface implementation. The first approach is like we give the laundry house our dirty clothes and a note which tell them how to wash our clothe. With Lambda Expression, We only pass our dirty clothes and orally tell them how to wash our clothes. We don’t need to write note any more, wonderful. To emphasize here, you can only user a Lambda Expression for a functional interface, like (Predicate<t>, Consumer<t>, Function&lt;T,R&gt;, etc). Because a functional interface contains only one abstract method, we can omit the name of the method name when we use Lambda Expression to implement it.</t></t></p>

<p>To explain function findAdultUserName() step by step:</p>

<ol>
  <li><strong>Obtain source data from userList, it will be an object of type Iterable.</strong></li>
  <li><strong>Filter objects that match the predicator object tester.</strong></li>
  <li><strong>mapper each filtered object to a value.</strong></li>
  <li><strong>Perform an action that consume our mapped value.</strong></li>
</ol>

<p>If you even don’t want to create this findAdultUserName() function, we also can do this with Aggregate Operation in our main function, which i will explain in future. Let’s see how simple the code is firstly.</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">userList</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">u</span> <span class="o">-&gt;</span> <span class="n">u</span><span class="o">.</span><span class="na">getAge</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">18</span><span class="o">)</span>
                <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">u</span> <span class="o">-&gt;</span> <span class="n">u</span><span class="o">.</span><span class="na">getName</span><span class="o">())</span>
                <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">name</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span><span class="o">));</span></code></pre></div>

<p>For the syntax of Lambda Expression, you can reference <a href="https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html#syntax">oracle doc</a>. You can also check the my source code on <a href="https://github.com/zzyclark/Lambda-Expression-in-Java">github</a>.</p>

  </article>
  <hr />
</div>


<section class="pager">
  <ul>
    
    <li class="previous"><a href="/ski/2015/11/01/Ski-Trip-in-Bei-Da-Hu-Resort.html" title="Ski trip in Bei Da Hu">&larr; Older</a></li>
    
    
    <li class="next"><a href="/articles/2015/12/03/CouchDB%20with%20HibernateOGM.html" title="CouchDB With HibernateOGM">Newer &rarr;</a></li>
    
  </ul>
</section>

<div id="disqus_thread"></div>

<script type="text/javascript">

  var disqus_developer = 1;

var disqus_shortname ='superclark';
/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>

<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>



    <section class="pager">
  
  
</section>


  </div>
  <div class="col-sm-2">
<div class="sidebar-module about">
  <h4>About Me</h4>
  <img title="Clark Zhang" src="https://farm4.staticflickr.com/3924/buddyicons/125798402@N08_r.jpg" alt="Clark Zhang"/>
  <span>Hi, this is Clark Zhang. I made Superclark to share leaning experience. Please enjoy it.</span>
  <br />

  

  You can contact me via: <br />

  
  <a href="mailto:zhangzongyangclark@gmail.com" title="mailto: zhangzongyangclark@gmail.com"><i class="fa fa-envelope-square fa-3x"></i></a>&nbsp;
  
  
  <a href="https://github.com/zzyclark" title="GithubID: zzyclark"><i class="fa fa-github-square fa-3x"></i></a>&nbsp;
  
  
  <a href="https://twitter.com/Clark_theSuper" title="TwitterID: Clark_theSuper"><i class="fa fa-twitter-square fa-3x"></i></a>
  

  

</div>

<div class="sidebar-module">
  <h4>Site Search</h4>
  <form onsubmit="search_google()" >
    <input type="text" id="google-search" placeholder="Google search" />
    <input type="submit" name="sa" value="Go" />
  </form>
</div>

<div class="sidebar-module">
  <h4>Recent Posts</h4>
  
  <li>
  <a href="//articles/2016/05/13/Build-Your-Own-Cache-Busting-Service.html" title="Build Your Own Cache Busting Extension" rel="bookmark">Build Your Own Cache Busting Extension</a>
  </li>
  
  <li>
  <a href="//articles/2015/12/16/CouchDB-with-Ektorp.html" title="CouchDB With Ektorp" rel="bookmark">CouchDB With Ektorp</a>
  </li>
  
  <li>
  <a href="//articles/2015/12/03/CouchDB%20with%20HibernateOGM.html" title="CouchDB With HibernateOGM" rel="bookmark">CouchDB With HibernateOGM</a>
  </li>
  
  <li>
  <a href="//articles/2015/11/09/Lambda-Expression-in-Java.html" title="Lambda Expression in Java" rel="bookmark">Lambda Expression in Java</a>
  </li>
  
  <li>
  <a href="//ski/2015/11/01/Ski-Trip-in-Bei-Da-Hu-Resort.html" title="Ski trip in Bei Da Hu" rel="bookmark">Ski trip in Bei Da Hu</a>
  </li>
  
</div>


<div class="sidebar-module">
  <h4>Categories</h4>
  
  <li><a href="/categories/#articles" title="articles" rel="6">articles (6)</a></li>
  
  <li><a href="/categories/#ski" title="ski" rel="1">ski (1)</a></li>
  
</div>


<div class="sidebar-module">
  <h4>Tags</h4>
  
    <a href="/tags/#Angularjs" title="Angularjs" rel="1">Angularjs</a> &nbsp;
  
    <a href="/tags/#Spring Security" title="Spring Security" rel="1">Spring Security</a> &nbsp;
  
    <a href="/tags/#Java" title="Java" rel="4">Java</a> &nbsp;
  
    <a href="/tags/#Ski" title="Ski" rel="1">Ski</a> &nbsp;
  
    <a href="/tags/#Travel" title="Travel" rel="1">Travel</a> &nbsp;
  
    <a href="/tags/#CouchDB" title="CouchDB" rel="2">CouchDB</a> &nbsp;
  
    <a href="/tags/#Nodejs" title="Nodejs" rel="1">Nodejs</a> &nbsp;
  
    <a href="/tags/#Javascript" title="Javascript" rel="1">Javascript</a> &nbsp;
  
</div>


<div class="sidebar-module">
  <h4>Blogroll</h4>
  
  <li><a href="http://superclark.co" title="Clark's tech blog">Clark Zhang</a></li>
  
</div>


<div class="sidebar-module">
  <h4>Archives</h4>

  
  
  
  
  
  <li id="2016" > <a href="/archives/#2016">2016</a></li>
  
  
  
  
  
  
  
  <li id="2015" > <a href="/archives/#2015">2015</a></li>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

</div>


<div class="sidebar-module">
  <h4>Visitors</h4>
  <script type="text/javascript" src="//ra.revolvermaps.com/0/0/1.js?i=08nxdj9ls7x&amp;s=220&amp;m=0&amp;v=false&amp;r=false&amp;b=000000&amp;n=false&amp;c=ff0000" async="async"></script>
  <a href="http://info.flagcounter.com/Flcu"><img src="http://s01.flagcounter.com/count2/Flcu/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_10/viewers_0/labels_0/pageviews_0/flags_0/percent_0/" alt="Flag Counter" border="0"></a>
</div>

</div>


  

  <footer class="site-footer">

  <p>Copyright &copy; <a href="/">Superclark</a></p>
  <p>Powered by <a href="https://github.com/jekyll/jekyll">Jekyll</a>
  on
  
  <a href="https://github.com/">Github</a>
  


  <div id="totop" style="position:fixed;bottom:150px;right:50px;cursor: pointer;">
    <a title="Back To Top"><img src="/images/topbutton.png"/></a>
  </div>

  <script src="/js/jquery-1.9.1.min.js"></script>
  <script src="/js/totop.js"></script>



</footer>


</div>

</body>

</html>
